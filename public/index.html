<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reading Tracker</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Navbar -->
    <nav class="bg-white shadow">
      <div
        class="container mx-auto px-4 py-4 flex items-center justify-between"
      >
        <div class="text-xl font-bold">Reading Tracker</div>
        <div class="space-x-4 flex items-center">
          <button
            id="tab-users"
            class="tab-btn text-gray-600 hover:text-blue-500 focus:outline-none"
          >
            Users
          </button>
          <button
            id="tab-books"
            class="tab-btn text-gray-600 hover:text-blue-500 focus:outline-none"
          >
            Books
          </button>
          <button
            id="tab-reading"
            class="tab-btn text-gray-600 hover:text-blue-500 focus:outline-none"
          >
            Reading
          </button>
          <button
            id="tab-friends"
            class="tab-btn text-gray-600 hover:text-blue-500 focus:outline-none"
          >
            Friends
          </button>
          <button
            id="tab-admin"
            class="tab-btn text-gray-600 hover:text-blue-500 focus:outline-none hidden"
          >
            Admin
          </button>
          <div id="authStatus" class="ml-6 text-sm"></div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
      <!-- Auth Section -->
      <section id="section-auth" class="mb-8">
        <div id="authForms" class="bg-white shadow rounded p-4">
          <div id="authSwitch" class="flex space-x-4 mb-4">
            <button id="showLogin" class="px-3 py-1 rounded bg-gray-200">
              Login
            </button>
            <button id="showRegister" class="px-3 py-1 rounded">
              Register
            </button>
          </div>
          <form id="loginForm" class="space-y-3">
            <div>
              <label class="block text-sm">Username</label>
              <input
                type="text"
                id="loginUsername"
                class="w-full border rounded px-2 py-1"
                placeholder="Enter username"
              />
            </div>
            <div>
              <label class="block text-sm">Password</label>
              <input
                type="password"
                id="loginPassword"
                class="w-full border rounded px-2 py-1"
                placeholder="Enter password"
              />
            </div>
            <button class="bg-blue-600 text-white px-4 py-1 rounded">
              Login
            </button>
            <div id="loginMessage" class="text-sm text-red-600"></div>
          </form>
          <form id="registerForm" class="space-y-3 hidden">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
              <div>
                <label class="block text-sm">Name</label>
                <input
                  type="text"
                  id="registerName"
                  class="w-full border rounded px-2 py-1"
                  placeholder="Your name"
                />
              </div>
              <div>
                <label class="block text-sm">Username</label>
                <input
                  type="text"
                  id="registerUsername"
                  class="w-full border rounded px-2 py-1"
                  placeholder="Choose username"
                />
              </div>
              <div>
                <label class="block text-sm">Password</label>
                <input
                  type="password"
                  id="registerPassword"
                  class="w-full border rounded px-2 py-1"
                  placeholder="Choose password"
                />
              </div>
            </div>
            <button class="bg-green-600 text-white px-4 py-1 rounded">
              Register
            </button>
            <div id="registerMessage" class="text-sm text-green-700"></div>
          </form>
        </div>
      </section>

      <!-- Users Section -->
      <section id="section-users" class="tab-section">
        <h2 class="text-2xl font-semibold mb-4">Users</h2>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white shadow rounded mb-6">
            <thead>
              <tr>
                <th class="px-4 py-2">ID</th>
                <th class="px-4 py-2">Name</th>
                <th class="px-4 py-2">Username</th>
                <th class="px-4 py-2">Actions</th>
              </tr>
            </thead>
            <tbody id="usersTableBody"></tbody>
          </table>
          <pre
            id="userStatsOutput"
            class="bg-gray-50 p-3 rounded text-sm"
          ></pre>
        </div>
      </section>

      <!-- Books Section -->
      <section id="section-books" class="hidden tab-section">
        <h2 class="text-2xl font-semibold mb-4">Books</h2>
        <div class="bg-white shadow rounded p-4 mb-4">
          <h3 class="font-semibold mb-2">Catalog Controls</h3>
          <div class="grid grid-cols-1 md:grid-cols-5 gap-2 mb-2">
            <input
              type="text"
              id="booksSearch"
              placeholder="Search title/author"
              class="border border-gray-300 rounded px-2 py-1"
            />
            <select
              id="booksSortBy"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Sort By</option>
              <option value="title">Title</option>
              <option value="author">Author</option>
              <option value="publishDate">Publish Date</option>
              <option value="uploadedAt">Uploaded</option>
              <option value="avgProgress">Avg Progress</option>
            </select>
            <select
              id="booksOrder"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="asc">Asc</option>
              <option value="desc">Desc</option>
            </select>
            <input
              type="number"
              id="booksPage"
              class="border border-gray-300 rounded px-2 py-1"
              placeholder="Page"
              value="1"
              min="1"
            />
            <input
              type="number"
              id="booksPageSize"
              class="border border-gray-300 rounded px-2 py-1"
              placeholder="Page Size"
              value="10"
              min="1"
              max="100"
            />
          </div>
          <div class="flex items-center space-x-2">
            <button id="booksApply" class="bg-gray-100 px-3 py-1 rounded">
              Apply
            </button>
            <span id="booksMeta" class="text-sm text-gray-600"></span>
          </div>
        </div>
        <form
          id="createBookForm"
          class="mb-6 grid grid-cols-1 md:grid-cols-5 gap-2"
        >
          <input
            type="text"
            id="newBookTitle"
            placeholder="Title"
            class="border border-gray-300 rounded px-2 py-1"
          />
          <input
            type="text"
            id="newBookAuthor"
            placeholder="Author"
            class="border border-gray-300 rounded px-2 py-1"
          />
          <input
            type="number"
            id="newBookPages"
            placeholder="Total Pages"
            class="border border-gray-300 rounded px-2 py-1"
          />
          <input
            type="text"
            id="newBookPublishDate"
            placeholder="Publish Date (YYYY-MM-DD)"
            class="border border-gray-300 rounded px-2 py-1"
          />
          <button class="bg-blue-500 text-white px-4 py-1 rounded">
            Create
          </button>
        </form>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white shadow rounded">
            <thead>
              <tr>
                <th class="px-4 py-2">ID</th>
                <th class="px-4 py-2">Title</th>
                <th class="px-4 py-2">Author</th>
                <th class="px-4 py-2">Pages</th>
                <th class="px-4 py-2">Publish Date</th>
                <th class="px-4 py-2">Uploaded</th>
                <th class="px-4 py-2">Actions</th>
              </tr>
            </thead>
            <tbody id="booksTableBody"></tbody>
          </table>
          <div class="mt-3">
            <pre
              id="bookStatsOutput"
              class="bg-gray-50 p-3 rounded text-sm"
            ></pre>
          </div>
        </div>
      </section>

      <!-- Reading Section -->
      <section id="section-reading" class="hidden tab-section">
        <h2 class="text-2xl font-semibold mb-4">Reading Progress</h2>
        <!-- Search Progress by Book -->
        <div class="mb-6">
          <label for="searchBookSelect" class="block mb-1"
            >Search Progress by Book:</label
          >
          <div class="flex space-x-2">
            <select
              id="searchBookSelect"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Select Book</option>
            </select>
            <button
              id="searchReadingBtn"
              class="bg-green-500 text-white px-4 py-1 rounded"
            >
              Search
            </button>
          </div>
          <div
            id="searchReadingOutput"
            class="bg-white p-4 rounded shadow mt-4"
          ></div>
        </div>
        <form id="updateReadingForm" class="mb-6 space-y-2">
          <div class="flex space-x-2">
            <select
              id="readingUserSelect"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Select User</option>
            </select>
            <select
              id="readingBookSelect"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Select Book</option>
            </select>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
            <input
              type="number"
              id="readingCurrentPage"
              placeholder="Current Page"
              class="border border-gray-300 rounded px-2 py-1 w-full"
            />
            <select
              id="readingStatusSelect"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Status (auto)</option>
              <option value="want-to-read">want-to-read</option>
              <option value="not-started">not-started</option>
              <option value="in-progress">in-progress</option>
              <option value="completed">completed</option>
            </select>
          </div>
          <button class="bg-blue-500 text-white px-4 py-1 rounded">
            Update Progress
          </button>
        </form>
        <pre id="readingOutput" class="bg-white p-4 rounded shadow"></pre>
        <div class="mt-6 bg-white p-4 rounded shadow">
          <h3 class="text-xl font-semibold mb-3">My Shelf</h3>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-2 mb-2">
            <select
              id="shelfStatus"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">All statuses</option>
              <option value="want-to-read">want-to-read</option>
              <option value="not-started">not-started</option>
              <option value="in-progress">in-progress</option>
              <option value="completed">completed</option>
            </select>
            <select
              id="shelfSortBy"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Sort By</option>
              <option value="title">Title</option>
              <option value="author">Author</option>
              <option value="progress">Progress</option>
              <option value="updatedAt">Updated</option>
            </select>
            <select
              id="shelfOrder"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="asc">Asc</option>
              <option value="desc">Desc</option>
            </select>
            <button id="loadShelfBtn" class="bg-gray-100 px-3 py-1 rounded">
              Load Shelf
            </button>
          </div>
          <div id="shelfOutput" class="text-sm"></div>
        </div>
      </section>

      <!-- Friends Section -->
      <section id="section-friends" class="hidden tab-section">
        <h2 class="text-2xl font-semibold mb-4">Friends</h2>

        <!-- Send Friend Requests -->
        <div class="bg-white shadow rounded p-4 mb-8">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-xl font-semibold">Send Friend Request</h3>
            <span class="text-sm text-gray-500"
              >Select any user (not yourself)</span
            >
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead>
                <tr>
                  <th class="px-4 py-2">ID</th>
                  <th class="px-4 py-2">Name</th>
                  <th class="px-4 py-2">Username</th>
                  <th class="px-4 py-2">Action</th>
                </tr>
              </thead>
              <tbody id="friendsUsersTableBody"></tbody>
            </table>
          </div>
          <div id="friendRequestMessage" class="text-sm mt-2"></div>
        </div>

        <!-- Incoming Requests -->
        <div class="bg-white shadow rounded p-4 mb-8">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-xl font-semibold">Incoming Requests</h3>
            <button
              id="refreshIncomingBtn"
              class="bg-gray-100 px-3 py-1 rounded"
            >
              Refresh
            </button>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead>
                <tr>
                  <th class="px-4 py-2">Request ID</th>
                  <th class="px-4 py-2">From User</th>
                  <th class="px-4 py-2">Actions</th>
                </tr>
              </thead>
              <tbody id="incomingRequestsBody"></tbody>
            </table>
          </div>
          <div id="incomingMessage" class="text-sm mt-2"></div>
        </div>

        <!-- View User's Friends & Progress -->
        <div class="bg-white shadow rounded p-4">
          <h3 class="text-xl font-semibold mb-3">View a User's Friends</h3>
          <div class="flex items-center space-x-2 mb-3">
            <select
              id="friendsUserSelect"
              class="border border-gray-300 rounded px-2 py-1"
            >
              <option value="">Select User</option>
            </select>
            <button
              id="loadFriendsBtn"
              class="bg-blue-500 text-white px-4 py-1 rounded"
            >
              Load Friends
            </button>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <h4 class="font-semibold mb-2">Friends List</h4>
              <ul id="friendsList" class="list-disc pl-5"></ul>
            </div>
            <div>
              <h4 class="font-semibold mb-2">Selected Friend Progress</h4>
              <div
                id="friendProgress"
                class="bg-gray-50 rounded p-3 text-sm"
              ></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Logs Section -->
      <section id="section-admin" class="hidden tab-section">
        <h2 class="text-2xl font-semibold mb-4">Recent API Logs</h2>
        <div class="flex items-center space-x-2 mb-3">
          <label for="logsLimit">Limit:</label>
          <input
            id="logsLimit"
            type="number"
            value="20"
            min="1"
            max="100"
            class="border border-gray-300 rounded px-2 py-1 w-24"
          />
          <button
            id="refreshLogs"
            class="bg-blue-500 text-white px-3 py-1 rounded"
          >
            Refresh
          </button>
          <span id="logsMessage" class="text-sm ml-2"></span>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white shadow rounded">
            <thead>
              <tr>
                <th class="px-4 py-2">Time</th>
                <th class="px-4 py-2">Method</th>
                <th class="px-4 py-2">URL</th>
                <th class="px-4 py-2">Status</th>
                <th class="px-4 py-2">ms</th>
              </tr>
            </thead>
            <tbody id="logsTableBody"></tbody>
          </table>
        </div>
      </section>
    </div>

    <!-- App Logic -->
    <script src="app.js"></script>
  </body>
</html>
